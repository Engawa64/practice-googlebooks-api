<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <script src="jquery-3.5.1.min.js"></script>
    <link rel="stylesheet" href="styles.css" />
    <title>GoogleBookæ¤œç´¢</title>
    <script>
      $(function () {
        //-----------------------------------
        //getJSON[é–‹å§‹]
        let url = "https://www.googleapis.com/books/v1/volumes?q=";

        $("#readbook").on("click", function () {
          query = document.getElementById("query").value;

          $.getJSON(url + query, function (data) {
            console.log(data);
            let view = ""; //è¡¨ç¤ºã™ã‚‹æ–‡å­—åˆ—ã‚’å…¥ã‚Œã‚‹å¤‰æ•°
            view += "<p>æ¤œç´¢ï¼š" + query + "</p>";
            for (var i = 0; i < data.items.length; i++) {
              let item = data.items[i];

              view += "<ul>";
              view +=
                '<img src="' +
                item.volumeInfo.imageLinks.smallThumbnail +
                '" />';
              view += "<li>é¡Œåï¼š" + item.volumeInfo.title + "</li>";

              view += "<li>è‘—è€…:" + item.volumeInfo.authors + "</li>";

              view += "</ul>";
            }

            if (data.items.length == 0) {
              alart("ãŠæ¢ã—ã®æƒ…å ±ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚");
            } else {
              //å¤‰æ•°ã«å…¥ã£ãŸæ–‡å­—åˆ—ã‚’è¡¨ç¤º
              $("#content").html(view);
              console.log(
                "æ¤œç´¢ï¼š" + query + "\n" + "è¡¨ç¤ºæ•°ï¼š" + data.items.length
              );
            }
          });
          //getJSON[çµ‚äº†]
          //-----------------------------------
        });
      });
    </script>
  </head>
  <body>
    <header>
      <h1 class="header_title">GoogleBooksæ¤œç´¢</h1>
      <p>
        <input id="query" type="text" value="" />
        <button id="readbook" class="header_btn">ğŸ”æ¤œç´¢</button>
      </p>
    </header>

    <main>
      <p id="content" class="main_txt">
        ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥ã‚Œã¦æ¤œç´¢ã—ã¦ãã ã•ã„ã€‚
        <br />
        çµæœãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚
        <br />
        æ¤œç´¢ä¾‹ï¼‰å’Œè“å­
      </p>
    </main>
    <footer>
      <p>(c) GoogleBooksæ¤œç´¢</p>
    </footer>
  </body>
</html>
